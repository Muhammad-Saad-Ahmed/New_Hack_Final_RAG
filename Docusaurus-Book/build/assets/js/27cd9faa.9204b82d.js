"use strict";(globalThis.webpackChunkphysical_ai_book=globalThis.webpackChunkphysical_ai_book||[]).push([[808],{7293:(e,n,o)=>{o.d(n,{A:()=>P});var i=o(6540),r=o(4848);function s(e){const{mdxAdmonitionTitle:n,rest:o}=function(e){const n=i.Children.toArray(e),o=n.find(e=>i.isValidElement(e)&&"mdxAdmonitionTitle"===e.type),s=n.filter(e=>e!==o),t=o?.props.children;return{mdxAdmonitionTitle:t,rest:s.length>0?(0,r.jsx)(r.Fragment,{children:s}):null}}(e.children),s=e.title??n;return{...e,...s&&{title:s},children:o}}var t=o(4164),l=o(1312),d=o(7559);const c="admonition_xJq3",a="admonitionHeading_Gvgb",h="admonitionIcon_Rf37",u="admonitionContent_BuS1";function p({type:e,className:n,children:o}){return(0,r.jsx)("div",{className:(0,t.A)(d.G.common.admonition,d.G.common.admonitionType(e),c,n),children:o})}function m({icon:e,title:n}){return(0,r.jsxs)("div",{className:a,children:[(0,r.jsx)("span",{className:h,children:e}),n]})}function x({children:e}){return e?(0,r.jsx)("div",{className:u,children:e}):null}function g(e){const{type:n,icon:o,title:i,children:s,className:t}=e;return(0,r.jsxs)(p,{type:n,className:t,children:[i||o?(0,r.jsx)(m,{title:i,icon:o}):null,(0,r.jsx)(x,{children:s})]})}function j(e){return(0,r.jsx)("svg",{viewBox:"0 0 14 16",...e,children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})})}const y={icon:(0,r.jsx)(j,{}),title:(0,r.jsx)(l.A,{id:"theme.admonition.note",description:"The default label used for the Note admonition (:::note)",children:"note"})};function f(e){return(0,r.jsx)(g,{...y,...e,className:(0,t.A)("alert alert--secondary",e.className),children:e.children})}function w(e){return(0,r.jsx)("svg",{viewBox:"0 0 12 16",...e,children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})})}const _={icon:(0,r.jsx)(w,{}),title:(0,r.jsx)(l.A,{id:"theme.admonition.tip",description:"The default label used for the Tip admonition (:::tip)",children:"tip"})};function v(e){return(0,r.jsx)(g,{..._,...e,className:(0,t.A)("alert alert--success",e.className),children:e.children})}function N(e){return(0,r.jsx)("svg",{viewBox:"0 0 14 16",...e,children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})})}const b={icon:(0,r.jsx)(N,{}),title:(0,r.jsx)(l.A,{id:"theme.admonition.info",description:"The default label used for the Info admonition (:::info)",children:"info"})};function k(e){return(0,r.jsx)(g,{...b,...e,className:(0,t.A)("alert alert--info",e.className),children:e.children})}function R(e){return(0,r.jsx)("svg",{viewBox:"0 0 16 16",...e,children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})})}const S={icon:(0,r.jsx)(R,{}),title:(0,r.jsx)(l.A,{id:"theme.admonition.warning",description:"The default label used for the Warning admonition (:::warning)",children:"warning"})};function C(e){return(0,r.jsx)("svg",{viewBox:"0 0 12 16",...e,children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"})})}const O={icon:(0,r.jsx)(C,{}),title:(0,r.jsx)(l.A,{id:"theme.admonition.danger",description:"The default label used for the Danger admonition (:::danger)",children:"danger"})};const T={icon:(0,r.jsx)(R,{}),title:(0,r.jsx)(l.A,{id:"theme.admonition.caution",description:"The default label used for the Caution admonition (:::caution)",children:"caution"})};const A={...{note:f,tip:v,info:k,warning:function(e){return(0,r.jsx)(g,{...S,...e,className:(0,t.A)("alert alert--warning",e.className),children:e.children})},danger:function(e){return(0,r.jsx)(g,{...O,...e,className:(0,t.A)("alert alert--danger",e.className),children:e.children})}},...{secondary:e=>(0,r.jsx)(f,{title:"secondary",...e}),important:e=>(0,r.jsx)(k,{title:"important",...e}),success:e=>(0,r.jsx)(v,{title:"success",...e}),caution:function(e){return(0,r.jsx)(g,{...T,...e,className:(0,t.A)("alert alert--warning",e.className),children:e.children})}}};function P(e){const n=s(e),o=(i=n.type,A[i]||(console.warn(`No admonition component found for admonition type "${i}". Using Info as fallback.`),A.info));var i;return(0,r.jsx)(o,{...n})}},8453:(e,n,o)=>{o.d(n,{R:()=>t,x:()=>l});var i=o(6540);const r={},s=i.createContext(r);function t(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(s.Provider,{value:n},e.children)}},9066:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"ros2-programming/writing-nodes","title":"Lesson 2.1: Writing ROS 2 Nodes with rclpy","description":"Learn how to write a basic ROS 2 node in Python using rclpy.","source":"@site/docs/02-ros2-programming/01-writing-nodes.mdx","sourceDirName":"02-ros2-programming","slug":"/ros2-programming/writing-nodes","permalink":"/docs/ros2-programming/writing-nodes","draft":false,"unlisted":false,"editUrl":"https://github.com/Muhammad-Saad-Ahmed/New_Hack_Final_RAG/tree/main/docs/02-ros2-programming/01-writing-nodes.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Lesson 2.1: Writing ROS 2 Nodes with rclpy","description":"Learn how to write a basic ROS 2 node in Python using rclpy."},"sidebar":"tutorialSidebar","previous":{"title":"Lesson 1.3: Installing the ROS 2 Environment","permalink":"/docs/intro-to-ros2/installing-ros2"},"next":{"title":"Lesson 2.2: Publishing and Subscribing to Topics","permalink":"/docs/ros2-programming/pub-sub"}}');var r=o(4848),s=o(8453);o(7293);const t={title:"Lesson 2.1: Writing ROS 2 Nodes with rclpy",description:"Learn how to write a basic ROS 2 node in Python using rclpy."},l="Lesson 2.1: Writing ROS 2 Nodes with rclpy",d={},c=[{value:"Learning Goals",id:"learning-goals",level:2},{value:"What is <code>rclpy</code>?",id:"what-is-rclpy",level:2},{value:"&quot;Hello World&quot; Node Example",id:"hello-world-node-example",level:2},{value:"Code Breakdown",id:"code-breakdown",level:3},{value:"Hands-on Lab: Create and Run Your First Node",id:"hands-on-lab-create-and-run-your-first-node",level:2},{value:"1. Create a ROS 2 Package",id:"1-create-a-ros-2-package",level:3},{value:"2. Create the Node File",id:"2-create-the-node-file",level:3},{value:"3. Add an Entry Point",id:"3-add-an-entry-point",level:3},{value:"4. Build and Run the Node",id:"4-build-and-run-the-node",level:3}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"lesson-21-writing-ros-2-nodes-with-rclpy",children:"Lesson 2.1: Writing ROS 2 Nodes with rclpy"})}),"\n",(0,r.jsx)(n.h2,{id:"learning-goals",children:"Learning Goals"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Understand the role of ",(0,r.jsx)(n.code,{children:"rclpy"}),", the ROS 2 Python client library."]}),"\n",(0,r.jsx)(n.li,{children:'Write a simple "Hello World" ROS 2 node in Python.'}),"\n",(0,r.jsx)(n.li,{children:"Create a ROS 2 package to organize your code."}),"\n",(0,r.jsx)(n.li,{children:"Build and run your own Python node."}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"what-is-rclpy",children:["What is ",(0,r.jsx)(n.code,{children:"rclpy"}),"?"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"rclpy"})," is the official ",(0,r.jsx)(n.strong,{children:"ROS Client Library for Python"}),". It provides the necessary tools and interfaces to write ROS 2 nodes in Python. With ",(0,r.jsx)(n.code,{children:"rclpy"}),", you can create nodes, publish and subscribe to topics, create services and clients, and interact with all the core features of ROS 2."]}),"\n",(0,r.jsxs)(n.p,{children:["To use ",(0,r.jsx)(n.code,{children:"rclpy"}),", you simply import it into your Python script:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"rclpy.node.Node"})," class is the foundation for creating your own nodes."]}),"\n",(0,r.jsx)(n.h2,{id:"hello-world-node-example",children:'"Hello World" Node Example'}),"\n",(0,r.jsx)(n.p,{children:'Let\'s create a simple node that just prints a "Hello, ROS 2!" message to the console.'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\n\nclass MyNode(Node):\n    def __init__(self):\n        super().__init__('hello_ros2_node')\n        self.get_logger().info('Hello, ROS 2!')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = MyNode()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"code-breakdown",children:"Code Breakdown"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"import rclpy"})," and ",(0,r.jsx)(n.code,{children:"from rclpy.node import Node"})]}),": We import the necessary libraries."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"class MyNode(Node):"})}),": We define our own node class, inheriting from the base ",(0,r.jsx)(n.code,{children:"Node"})," class."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"super().__init__('hello_ros2_node')"})}),": We call the parent class constructor and give our node a unique name, ",(0,r.jsx)(n.code,{children:"hello_ros2_node"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"self.get_logger().info(...)"})}),": We use the node's built-in logger to print a message. This is the standard way to print information in ROS 2."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"def main(args=None):"})}),": The main function where the program execution starts."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"rclpy.init(args=args)"})}),": Initializes the ",(0,r.jsx)(n.code,{children:"rclpy"})," library. This must be the first line in your ROS 2 Python program."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"node = MyNode()"})}),": We create an instance of our node."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"rclpy.spin(node)"})}),": This is the main event loop for the node. It keeps the node running and responsive to events like incoming messages. The program will stay in this loop until the node is shut down."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"node.destroy_node()"})," and ",(0,r.jsx)(n.code,{children:"rclpy.shutdown()"})]}),": Cleans up the node and shuts down ",(0,r.jsx)(n.code,{children:"rclpy"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"hands-on-lab-create-and-run-your-first-node",children:"Hands-on Lab: Create and Run Your First Node"}),"\n",(0,r.jsx)(n.h3,{id:"1-create-a-ros-2-package",children:"1. Create a ROS 2 Package"}),"\n",(0,r.jsxs)(n.p,{children:["First, we need a package to hold our code. A package is just a directory with a specific structure and a ",(0,r.jsx)(n.code,{children:"package.xml"})," file."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Navigate to the src directory of your workspace\ncd ~/ros2_ws/src\n\n# Create a new package\nros2 pkg create --build-type ament_python my_python_pkg --dependencies rclpy\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This command creates a new directory called ",(0,r.jsx)(n.code,{children:"my_python_pkg"})," with all the necessary files for a Python package."]}),"\n",(0,r.jsx)(n.h3,{id:"2-create-the-node-file",children:"2. Create the Node File"}),"\n",(0,r.jsx)(n.p,{children:"Navigate into your new package and create a Python file for your node."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd my_python_pkg/my_python_pkg\ntouch hello_node.py\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Now, open ",(0,r.jsx)(n.code,{children:"hello_node.py"}),' in your favorite editor and paste the "Hello World" code from above into it.']}),"\n",(0,r.jsx)(n.h3,{id:"3-add-an-entry-point",children:"3. Add an Entry Point"}),"\n",(0,r.jsxs)(n.p,{children:["To make our node runnable, we need to add an entry point in the ",(0,r.jsx)(n.code,{children:"setup.py"})," file of our package. Open ",(0,r.jsx)(n.code,{children:"~/ros2_ws/src/my_python_pkg/setup.py"})," and add the following to the ",(0,r.jsx)(n.code,{children:"console_scripts"})," list inside ",(0,r.jsx)(n.code,{children:"entry_points"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# Inside setup.py\nentry_points={\n    'console_scripts': [\n        'hello_ros2 = my_python_pkg.hello_node:main',\n    ],\n},\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This tells ROS 2 that we want to create an executable called ",(0,r.jsx)(n.code,{children:"hello_ros2"})," that runs the ",(0,r.jsx)(n.code,{children:"main"})," function from our ",(0,r.jsx)(n.code,{children:"hello_node.py"})," file."]}),"\n",(0,r.jsx)(n.h3,{id:"4-build-and-run-the-node",children:"4. Build and Run the Node"}),"\n",(0,r.jsx)(n.p,{children:"Now, let's build our package and run the node."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Navigate to the root of your workspace\ncd ~/ros2_ws\n\n# Build your package\ncolcon build --packages-select my_python_pkg\n\n# Source the workspace\nsource install/setup.bash\n\n# Run your node\nros2 run my_python_pkg hello_ros2\n"})}),"\n",(0,r.jsx)(n.p,{children:'You should see the "Hello, ROS 2!" message printed in your terminal. You have successfully created and run your first ROS 2 Python node!'})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);